<template>  <div class="position-line" v-show="show">    <!--  默认十字定位  -->    <div class="default-position" v-if="defaultPosition">      <div class="info">横坐标</div>      <!--    颜色选择框1    -->      <div class="select color-select">        <div class="item selected">          <div class="color" :style="{backgroundColor: defaultPosition.color1}"></div>          <div class="desc">{{ defaultPosition.color1 | colorDesc(colors) }}</div>        </div>        <ul class="options">          <li :key="i" v-for="(c, i) of colors">            <div class="item" @click="setPosition('default', 'color1', c.color)">              <div class="color" :style="{backgroundColor: c.color}"></div>              <div class="desc">{{ c.desc }}</div>            </div>          </li>        </ul>      </div>      <!--    虚线选择框1    -->      <div class="select dotted-select">        <div class="item selected">          <div :class="lineType(defaultPosition.dottedLine1)"></div>        </div>        <ul class="options">          <li :key="i" v-for="(dotted, i) of dottedLines">            <div class="item"                 @click="setPosition('default', 'dottedLine1', dotted.value)">              <div :class="dotted.class"></div>            </div>          </li>        </ul>      </div>      <div class="info">纵坐标</div>      <!--    颜色选择框2    -->      <div class="select color-select">        <div class="item selected">          <div class="color" :style="{backgroundColor: defaultPosition.color2}"></div>          <div class="desc">{{ defaultPosition.color2 | colorDesc(colors) }}</div>        </div>        <ul class="options">          <li :key="i" v-for="(c, i) of colors">            <div class="item" @click="setPosition('default', 'color2', c.color)">              <div class="color"                   :style="{backgroundColor: c.color}"></div>              <div class="desc">{{ c.desc }}</div>            </div>          </li>        </ul>      </div>      <!--    虚线选择框2    -->      <div class="select dotted-select">        <div class="item selected">          <div :class="lineType(defaultPosition.dottedLine2)"></div>        </div>        <ul class="options">          <li :key="i" v-for="(dotted, i) of dottedLines">            <div class="item" @click="setPosition('default', 'dottedLine2', dotted.value)">              <div :class="dotted.class"></div>            </div>          </li>        </ul>      </div>    </div>    <!--  多维平面重建定位  -->    <div class="across-position" v-show="false">      <div class="scrollbar2">        <div class="container"             v-for="(value, key) in positionLineData"             v-show="key !== 'default'">          <div class="info">{{ key | keyName }}横坐标</div>          <!--    颜色选择框1    -->          <div class="select color-select">            <div class="item selected">              <div class="color" :style="{backgroundColor: value.color1}"></div>              <div class="desc">{{ value.color1 | colorDesc(colors) }}</div>            </div>            <ul class="options">              <li :key="i" v-for="(c, i) of colors">                <div class="item" @click="setPosition(key, 'color1', c.color)">                  <div class="color"                       :style="{backgroundColor: c.color}"></div>                  <div class="desc">{{ c.desc }}</div>                </div>              </li>            </ul>          </div>          <!--    虚线选择框1    -->          <div class="select dotted-select">            <div class="item selected">              <div :class="lineType(value.dottedLine1)"></div>            </div>            <ul class="options">              <li :key="i" v-for="(dotted, i) of dottedLines">                <div class="item" @click="setPosition(key, 'dottedLine1', dotted.value)">                  <div :class="dotted.class"></div>                </div>              </li>            </ul>          </div>          <div class="info">{{ key | keyName }}纵坐标</div>          <!--    颜色选择框2    -->          <div class="select color-select">            <div class="item selected">              <div class="color" :style="{backgroundColor: value.color2}"></div>              <div class="desc">{{ value.color2 | colorDesc(colors) }}</div>            </div>            <ul class="options">              <li :key="i" v-for="(c, i) of colors">                <div class="item" @click="setPosition(key, 'color2', c.color)">                  <div class="color"                       :style="{backgroundColor: c.color}"></div>                  <div class="desc">{{ c.desc }}</div>                </div>              </li>            </ul>          </div>          <!--    虚线选择框2    -->          <div class="select dotted-select">            <div class="item selected">              <div :class="lineType(value.dottedLine2)"></div>            </div>            <ul class="options">              <li :key="i" v-for="(dotted, i) of dottedLines">                <div class="item" @click="setPosition(key, 'dottedLine2', dotted.value)">                  <div :class="dotted.class"></div>                </div>              </li>            </ul>          </div>        </div>      </div>    </div>    <!--  定位线  -->    <div class="pos">      <div class="info">横坐标</div>      <div class="select color-select">        <div class="item selected">          <div class="color" :style="{backgroundColor: posData.color}"></div>          <div class="desc">{{ posData.color | colorDesc(colors) }}</div>        </div>        <ul class="options">          <li :key="i" v-for="(c, i) of colors">            <div class="item" @click="setPos('color', c.color)">              <div class="color" :style="{backgroundColor: c.color}"></div>              <div class="desc">{{ c.desc }}</div>            </div>          </li>        </ul>      </div>      <div class="select dotted-select">        <div class="item selected">          <div :class="lineType(posData.dottedLine)"></div>        </div>        <ul class="options">          <li :key="i" v-for="(dotted, i) of dottedLines">            <div class="item"                 @click="setPos('dottedLine', dotted.value)">              <div :class="dotted.class"></div>            </div>          </li>        </ul>      </div>    </div>  </div></template><script>export default {  name: "position-line",  props: {    show: Boolean,    positionLine: Object,    pos: Object,  },  data() {    return {      positionLineData: {}, // 深拷贝positionLine数据      posData: {}, // 深拷贝pos数据      colors: [        {color: "#25a5ad", desc: "青色"},        {color: "#3470d8", desc: "蓝色"},        {color: "#8a00da", desc: "紫色"},        {color: "#cd9700", desc: "橙色"},        {color: "#B6B636", desc: "黄色"}      ],      dottedLines: [        {class: "line", value: []},        {class: "dotted", value: [3, 3]},      ],    }  },  computed: {    defaultPosition() {      return this.positionLineData.default;    }  },  methods: {    /**     * 根据虚线值，返回class name     * @param lineValue {Array}     * @return {string}     */    lineType(lineValue) {      const n = lineValue.length;      if (n === 0) {        return "line";      } else {        return "dotted"      }    },    /**     * 设置十字定位线     * @param field     * @param key     * @param value     */    setPosition(field, key, value) {      this.positionLineData[field][key] = value;    },    /**     * 设置定位线     * @param key     * @param value     */    setPos(key, value) {      this.posData[key] = value;    },    /**     * 保存     */    save() {      this.$emit("update:positionLine", this.positionLineData);      localStorage.setItem("positionLine", JSON.stringify(this.positionLineData));      this.$emit("update:pos", this.posData);      localStorage.setItem("pos", JSON.stringify(this.posData));      this.$emit("refresh");    },    init() {      this.positionLineData = this.$clone(this.positionLine);      this.posData = this.$clone(this.pos);    },  },  created() {    this.init();  },  filters: {    keyName(field) {      switch (field) {        case "curViewMod0":          return "冠状面";        case "curViewMod1":          return "横断面";        case "curViewMod2":          return "矢状面";        default:          return "默认值";      }    },    colorDesc(colorValue, colors) {      const colorInfo = colors.find(c => c.color === colorValue);      return colorInfo.desc;    },  },  watch: {    show(newest) {      if (newest) {        this.init();      }    }  }}</script><style scoped lang="scss">@import "position-line";</style>